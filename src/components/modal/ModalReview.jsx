import { useState } from "react";

const ModalReview = () => {
  const [selectedOptions, setSelectedOptions] = useState([]);
  const [hoverRating, setHoverRating] = useState(0);
  const [selectedRating, setSelectedRating] = useState(0);

  const toggleOption = (option) => {
    setSelectedOptions((prevSelectedOptions) =>
      prevSelectedOptions.includes(option)
        ? prevSelectedOptions.filter((item) => item !== option)
        : [...prevSelectedOptions, option]
    );
  };

  const handleMouseEnter = (rating) => {
    setHoverRating(rating);
  };

  const handleMouseLeave = () => {
    setHoverRating(0);
  };

  const handleRatingClick = (rating) => {
    setSelectedRating(rating);
  };

  const options = [
    "Response Seller",
    "Kecepatan Pengiriman",
    "Kualitas Produk",
    "Kemasan Produk",
    "Kesesuaian Produk yang dikirim",
    "Kesesuaian Jumlah Produk yang dikirimkan",
  ];

  const rating = [
    "Belum Ada Penilaian",
    "Sangat Buruk",
    "Buruk",
    "Biasa",
    "Bagus",
    "Sangat Bagus",
  ];

  return (
    <>
      <div className="p-5">
        <div>
          <div className="flex items-center space-x-4 border-b pb-6">
            <div className="relative w-14 h-14 overflow-hidden text-sm bg-gray-400 rounded-lg">
              <img
                alt="product-image"
                loading="lazy"
                decoding="async"
                data-nimg="fill"
                sizes="100vw"
                src="https://stg.berasumkm.id/_next/image?url=https%3A%2F%2Fsmb-padiumkm-images-public-stage.oss-ap-southeast-5.aliyuncs.com%2Fproduct%2Fimage%2F20022023%2F6326f4f46a6f49dc5a8814db%2F63f31c2d67def6613a238a70%2F567c4effdfee94bb8cb69a9f68d337.jpeg&amp;w=3840&amp;q=50"
                style={{
                  position: "absolute",
                  height: "100%",
                  width: "100%",
                  inset: "0px",
                  objectFit: "cover",
                  color: "transparent",
                }}
              />
            </div>
            <div className="flex flex-col space-y-1">
              <span className="text-sm">Beras kampung Juara</span>
            </div>
          </div>
          <div className="divide-y-4">
            <div className="py-4 flex flex-col justify-center items-center space-y-1">
              <div>
                <span
                  className="space-x-1"
                  style={{ display: "inline-block", direction: "ltr" }}
                >
                  {[1, 2, 3, 4, 5].map((rating) => (
                    <span
                      key={rating}
                      onClick={() => handleRatingClick(rating)}
                      onMouseEnter={() => handleMouseEnter(rating)}
                      onMouseLeave={handleMouseLeave}
                      style={{
                        cursor: "pointer",
                        display: "inline-block",
                        position: "relative",
                      }}
                    >
                      <span>
                        <svg
                          stroke="currentColor"
                          fill="currentColor"
                          strokeWidth="0"
                          viewBox="0 0 576 512"
                          className={`text-2xl ${
                            rating <= (hoverRating || selectedRating)
                              ? "text-tertiary-60"
                              : "text-blackout"
                          }`}
                          height="1em"
                          width="1em"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"></path>
                        </svg>
                      </span>
                      <span
                        style={{
                          display: "inline-block",
                          position: "absolute",
                          overflow: "hidden",
                          top: "0px",
                          left: "0px",
                          width: `0%`,
                        }}
                      >
                        <svg
                          stroke="currentColor"
                          fill="currentColor"
                          strokeWidth="0"
                          viewBox="0 0 576 512"
                          className="text-2xl text-tertiary-60"
                          height="1em"
                          width="1em"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"></path>
                        </svg>
                      </span>
                    </span>
                  ))}
                </span>
              </div>
              <div className="text-paletteText-primary font-semibold">
                {rating[selectedRating]}
              </div>
            </div>
            <div className="py-4 flex flex-col items-center justify-center space-y-4">
              <div className="text-paletteText-primary text-sm">
                Apa yang Anda sukai?
              </div>
              <div className="flex flex-wrap items-center justify-center px-10">
                {options.map((option) => (
                  <div
                    key={option}
                    onClick={() => toggleOption(option)}
                    className={`border cursor-pointer p-2 m-1 rounded-md text-xs ${
                      selectedOptions.includes(option)
                        ? "bg-categoryBg-milkyWay text-secondary-70 border-secondary-70 "
                        : "bg-borderCard-card text-paletteText-primary"
                    }`}
                  >
                    {option}
                  </div>
                ))}
              </div>
            </div>
            <div className="pt-4 space-y-4">
              <div>
                <span className="text-sm text-paletteText-primary font-semibold">
                  Ulasan Tentang Produk
                </span>
                <textarea
                  className="border rounded-lg w-full p-2"
                  placeholder="Barangnya bagus, pengiriman cepat"
                ></textarea>
              </div>
              <div className="space-y-2">
                <div className="flex flex-col space-y-1">
                  <span className="text-sm text-paletteText-primary font-semibold">
                    Foto Produk
                  </span>
                  <span className="text-xs text-paletteText-primary">
                    Format dokumen JPG/PNG dengan ukuran maksimal 2MB
                  </span>
                </div>
                <div className="appearance-none text-sm border-2 border-dotted rounded my-2 text-gray-400 focus:outline-none text-center cursor-pointer">
                  <label
                    className="flex justify-center w-full h-full cursor-pointer"
                    htmlFor="upload-image"
                  >
                    <svg
                      stroke="currentColor"
                      fill="none"
                      strokeWidth="2"
                      viewBox="0 0 24 24"
                      strokeLinecap="round"
                      strokeLinejoin="round"
                      className="h-4 w-4 mr-2 my-auto"
                      height="1em"
                      width="1em"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <rect
                        x="3"
                        y="3"
                        width="18"
                        height="18"
                        rx="2"
                        ry="2"
                      ></rect>
                      <circle cx="8.5" cy="8.5" r="1.5"></circle>
                      <polyline points="21 15 16 10 5 21"></polyline>
                    </svg>
                    <div className="py-1"> Klik untuk upload media</div>
                  </label>
                </div>
                <input
                  autoComplete="none"
                  name="videoUpload"
                  type="file"
                  multiple=""
                  accept="image/x-png,image/jpeg,image/jpg,image/gif,video/mp4,video/3gpp"
                  id="upload-image"
                  className="opacity-0 absolute z-0"
                />
                <div className="flex overflow-auto py-3"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div className="flex items-center justify-end border-t p-6 border-solid border-slate-200 rounded-b space-x-2">
        <button
          className="px-4 py-1 border rounded-md text-white font-medium bg-secondary-70 hover:bg-secondary-40"
          type="button"
          onClick={() => (window.location.href = "/product?tab=Review")}
        >
          Kirim
        </button>
      </div>
    </>
  );
};

export default ModalReview;
